{
  "version": "https://jsonfeed.org/version/1",
  "title": "Mihai&#39;s blog",
  "home_page_url": "https://saftacatalinmihai.github.io/11rblog/",
  "feed_url": "https://example.com/feed/feed.json",
  "description": "phylosopher of computation",
  "author": {
    "name": "Mihai Safta",
    "url": "https://saftacatalinmihai.github.io/11rblog/"
  },
  "items": [{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/pure-functional-stream-processing-in-scala/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/pure-functional-stream-processing-in-scala/",
      "title": "Pure Functional Stream processing in Scala",
      "content_html": "<p>In Scala you can write pure functional code, similar to Haskell or other pure functional languages, but you’re not obligated to. Wikipedia categories Scala as an impure Functional language.</p>\n<p>FP purists view this as a weakness of Scala, but others view the option of “cheating” pureness as an acceptable choice sometimes. Even if you can do everything purely, it’s sometimes a lot easier to think about the problem in a different paradigm.</p>\n<p>Pure FP is great for writing correct functions you can easily reason about in isolation and compose well with other pure functions. We can easily unit test them since pure functions only depend on their input arguments and always produce the same output for the same arguments – they are referentially transparent.</p>\n<p>This allows the programmer and the compiler to reason about program behavior as a rewrite system. This can help in proving correctness, simplifying an algorithm, help change code without breaking it, or optimizing code through memoization, common sub-expression elimination, lazy evaluation, or parallelization.</p>\n<hr>\n<p>There are, however, other approaches to thinking about compossibility of programs.</p>\n<p>One such approach is to think of software components as black boxes running a process.\nThey have a variable number of input and output ports which have Types associated to them.\nMessages pass asynchronously from component to component after linking their corresponding ports together (if the types match).\nWe specify the connections outside the components themselves.\nThis is the thinking behind flow based programming.\n(This is also how microservices work at a larger scale)</p>\n<p>My view is that these two ways of thinking about composable programs are not mutually exclusive and they can work together in synergy. I will try to make this case by the end of this post.</p>\n<hr>\n<h3 id=\"pure-functional-programming-in-scala\" tabindex=\"-1\">Pure Functional Programming in Scala</h3>\n<p>Using Cats, you can use Type Classes: Functor, Applicative, Monad etc… to model your programs based on these highly general computational abstractions.\nThere are other ecosystems for pure FP in Scala. I chose Cats because I’m most familiar with it.</p>\n<p>Adding Cats-effect, you can also model IO in a pure functional way. The idea is to write the entire program, including all the effects like: calling external services, writing to file, pushing messages to queues, as a single composed expression that returns an IO data structure representing the action of running all these effects, without actually running them. You only execute them at the “end of the world” in the “main” method.</p>\n<p>This is a simple example of a pure functional program using cats-effect.</p>\n<pre class=\"language-scala\"><code class=\"language-scala\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">cats<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span></span><span class=\"token punctuation\">{</span> IO<span class=\"token punctuation\">,</span> Sync <span class=\"token punctuation\">}</span><br><span class=\"token keyword\">import</span> <span class=\"token namespace\">cats<span class=\"token punctuation\">.</span>implicits<span class=\"token punctuation\">.</span></span>_<br><span class=\"token keyword\">import</span> <span class=\"token namespace\">scala<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span>StdIn<br><br><span class=\"token keyword\">object</span> App <span class=\"token punctuation\">{</span><br><br>  <span class=\"token keyword\">def</span> getUserName<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> Sync<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> F<span class=\"token punctuation\">[</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><br>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span><br>      _    <span class=\"token keyword\">&lt;-</span> Sync<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">(</span>println<span class=\"token punctuation\">(</span><span class=\"token string\">\"What's your name?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>      name <span class=\"token keyword\">&lt;-</span> Sync<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">(</span>StdIn<span class=\"token punctuation\">.</span>readLine<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">yield</span> name<br><br>  <span class=\"token keyword\">def</span> greatUser<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> Sync<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> F<span class=\"token punctuation\">[</span><span class=\"token builtin\">Unit</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><br>    Sync<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">(</span>println<span class=\"token punctuation\">(</span>s<span class=\"token string\">\"Hello $name!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>  <span class=\"token keyword\">def</span> program<span class=\"token punctuation\">[</span>F<span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> Sync<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> F<span class=\"token punctuation\">[</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span><br>    name <span class=\"token keyword\">&lt;-</span> getUserName<br>    _    <span class=\"token keyword\">&lt;-</span> greatUser<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><br>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">yield</span> s<span class=\"token string\">\"Greeted $name\"</span><br><br>  <span class=\"token keyword\">def</span> main<span class=\"token punctuation\">(</span>args<span class=\"token operator\">:</span> Array<span class=\"token punctuation\">[</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Unit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>    program<span class=\"token punctuation\">[</span>IO<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>unsafeRunSync<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Real programs will, of course, be much more complex, but it all boils down to a single IO value that combines all the effects of running the program which we execute in the “main” method.</p>\n<p>Runar has a great talk where he compares using pure FP and IO as working with unexploded TNT. That is much easier to work with as opposed to working with exploded TNT (by actually executing effects in each function).</p>\n<h3 id=\"stream-processing-in-scala\" tabindex=\"-1\">Stream processing in Scala</h3>\n<p>Akka Streams implements the Reactive Streams protocol that’s now standardised in the JVM ecosystem.</p>\n<p>Streams have added benefits over simple functions by implementing flow control mechanisms which include back-pressure.</p>\n<p>You can think of streams as managed functions, similar to how the Operating System manages threads.</p>\n<p>A stream component can decide when to ask for more input messages to pass to its processing function, how many parallel calls to the function to allow, and whether to slow down processing because there is no demand from downstream functions.</p>\n<p>Akka is using the abstractions of Source, Flow, Sink for modeling streams.</p>\n<p align=\"center\">\n    <img alt=\"source-flow-sink\" title=\"Source via Flow to Sink\" src=\"/11rblog/SourceFlowSink-4.png\">\n</p>\n<!-- ![source-flow-sink](/11rblog/SourceFlowSink-4.png \"Source via Flow to Sink\") -->",
      "date_published": "2021-02-06T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/deadbeef-decrementation/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/deadbeef-decrementation/",
      "title": "Deadbeef Decrementation",
      "content_html": "<pre class=\"language-nasm\"><code class=\"language-nasm\"><span class=\"token comment\">;run on Linux with: nasm -felf64 decrement.asm &amp;&amp; ld decrement.o &amp;&amp; ./a.out</span><br><br><span class=\"token keyword\">global _start</span><br><br><span class=\"token keyword\">section .text</span><br><br><span class=\"token label function\">_start:</span><br>  mov <span class=\"token register variable\">rax</span>, <span class=\"token number\">0xDEADBEEF</span><br>  call decrement<br>  call exit<br><br><span class=\"token label function\">decrement:</span><br>  dec <span class=\"token register variable\">rax</span><br>  cmp <span class=\"token register variable\">rax</span>, <span class=\"token number\">0</span><br>  jg decrement<br>  ret<br><br><span class=\"token label function\">exit:</span><br>  mov <span class=\"token register variable\">rax</span>, <span class=\"token number\">60</span><br>  syscall<br><span class=\"token string\">``</span></code></pre>\n",
      "date_published": "2016-10-09T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/interior-crocodile-alligator/",
      "url": "https://saftacatalinmihai.github.io/11rblog/interior-crocodile-alligator/",
      "title": "Interior Crocodile Alligator, I Drive a Chevrolet Movie Theater",
      "content_html": "<p>To truly understand the captivating phenomenon that is the <a href=\"https://www.youtube.com/watch?v=0OEbuDP5Yys\">Interior Crocodile Alligator song</a>, you must be familiar with its <a href=\"https://youtu.be/UXQ38gUsB20\">history</a>.</p>\n",
      "date_published": "2008-09-19T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/why-my-practice-of-thelema-makes-me-better-at-world-of-warcraft/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/why-my-practice-of-thelema-makes-me-better-at-world-of-warcraft/",
      "title": "Why My Practice of Thelema Makes Me Better at World of Warcraft",
      "content_html": "<p>⛧⛧⛧</p>\n<p>ivil wea qep</p>\n<p>⛧⛧⛧</p>\n",
      "date_published": "1974-09-09T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/shrek-predicted-the-covid-19-pandemic/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/shrek-predicted-the-covid-19-pandemic/",
      "title": "Shrek Predicted the COVID-19 Pandemic",
      "content_html": "<p>Please watch <a href=\"https://youtu.be/dQw4w9WgXcQ\">this informational video</a> to learn more.</p>\n<p>Thank you for your time.</p>\n",
      "date_published": "1921-04-16T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/lorem-ipsum/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/lorem-ipsum/",
      "title": "Lorem Ipsum",
      "content_html": "<h3 id=\"lorem\" tabindex=\"-1\">Lorem</h3>\n<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Congue quisque egestas diam in arcu cursus euismod quis. Ac auctor augue mauris augue. Convallis tellus id interdum velit laoreet id donec ultrices. Aliquam eleifend mi in nulla posuere. Pretium quam vulputate dignissim suspendisse in est. Orci sagittis eu volutpat odio facilisis mauris sit. Non nisi est sit amet facilisis magna etiam tempor. Id diam maecenas ultricies mi eget. Sed velit dignissim sodales ut. Purus semper eget duis at. Pellentesque sit amet porttitor eget dolor morbi. Faucibus a pellentesque sit amet porttitor. Orci a scelerisque purus semper eget duis. Mauris commodo quis imperdiet massa tincidunt. Pulvinar elementum integer enim neque. In vitae turpis massa sed elementum. Rhoncus dolor purus non enim.</p>\n<h3 id=\"ipsum\" tabindex=\"-1\">Ipsum</h3>\n<p>Nunc non blandit massa enim nec dui nunc mattis enim. Lectus urna duis convallis convallis tellus. Maecenas volutpat blandit aliquam etiam. Vivamus arcu felis bibendum ut tristique et egestas quis. Amet aliquam id diam maecenas ultricies mi eget. In hac habitasse platea dictumst quisque sagittis purus sit. Non pulvinar neque laoreet suspendisse interdum consectetur libero id. Tempus imperdiet nulla malesuada pellentesque elit eget gravida cum sociis. Suscipit adipiscing bibendum est ultricies integer quis auctor elit. Adipiscing commodo elit at imperdiet dui accumsan sit amet. At augue eget arcu dictum varius duis. Purus viverra accumsan in nisl nisi. Ut pharetra sit amet aliquam.</p>\n<h3 id=\"dolor\" tabindex=\"-1\">Dolor</h3>\n<p>Nunc id cursus metus aliquam eleifend mi in nulla posuere. In fermentum posuere urna nec tincidunt praesent. Imperdiet massa tincidunt nunc pulvinar sapien et. Morbi tristique senectus et netus et. At quis risus sed vulputate odio ut enim blandit volutpat. Consectetur a erat nam at lectus. Adipiscing diam donec adipiscing tristique risus nec feugiat in. Dictum varius duis at consectetur lorem donec massa sapien. Adipiscing tristique risus nec feugiat in. Amet cursus sit amet dictum sit amet justo donec enim. Ullamcorper dignissim cras tincidunt lobortis feugiat vivamus at augue eget. Condimentum lacinia quis vel eros. Tincidunt tortor aliquam nulla facilisi cras fermentum odio eu feugiat. Enim eu turpis egestas pretium aenean.</p>\n<h3 id=\"sit\" tabindex=\"-1\">Sit</h3>\n<p>Gravida neque convallis a cras semper auctor. Viverra mauris in aliquam sem. Dui nunc mattis enim ut tellus elementum sagittis vitae. Viverra mauris in aliquam sem fringilla ut morbi tincidunt augue. Turpis cursus in hac habitasse platea dictumst quisque. Lectus quam id leo in vitae. Nibh venenatis cras sed felis eget velit. Ut ornare lectus sit amet. Iaculis nunc sed augue lacus viverra vitae congue. Lobortis feugiat vivamus at augue eget. At lectus urna duis convallis convallis tellus id interdum velit. Enim ut tellus elementum sagittis vitae et. Placerat in egestas erat imperdiet sed. Tempor orci eu lobortis elementum nibh. Tempus urna et pharetra pharetra. Ut aliquam purus sit amet luctus venenatis. Nisi porta lorem mollis aliquam ut porttitor. Nunc pulvinar sapien et ligula ullamcorper malesuada proin. Odio euismod lacinia at quis risus sed vulputate.</p>\n<h3 id=\"amet\" tabindex=\"-1\">Amet</h3>\n<p>Risus nullam eget felis eget nunc lobortis. Malesuada fames ac turpis egestas integer eget aliquet nibh. Viverra accumsan in nisl nisi. Lorem ipsum dolor sit amet. Facilisis magna etiam tempor orci eu lobortis elementum nibh. Eu volutpat odio facilisis mauris sit amet. Arcu bibendum at varius vel pharetra vel turpis nunc. Et tortor consequat id porta nibh venenatis. In tellus integer feugiat scelerisque varius. Etiam non quam lacus suspendisse faucibus interdum posuere. Ac auctor augue mauris augue neque gravida. Faucibus et molestie ac feugiat sed lectus vestibulum mattis. Proin libero nunc consequat interdum varius. Luctus accumsan tortor posuere ac ut. Mauris a diam maecenas sed enim ut sem viverra aliquet. Fames ac turpis egestas integer eget aliquet nibh.</p>\n",
      "date_published": "1918-11-04T00:00:00Z"
    },{
      "id": "https://saftacatalinmihai.github.io/11rblog/post/son-of-lorem-ipsum/",
      "url": "https://saftacatalinmihai.github.io/11rblog/post/son-of-lorem-ipsum/",
      "title": "Son of Lorem Ipsum",
      "content_html": "<h3 id=\"lorem\" tabindex=\"-1\">Lorem</h3>\n<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Congue quisque egestas diam in arcu cursus euismod quis. Ac auctor augue mauris augue. Convallis tellus id interdum velit laoreet id donec ultrices. Aliquam eleifend mi in nulla posuere. Pretium quam vulputate dignissim suspendisse in est. Orci sagittis eu volutpat odio facilisis mauris sit. Non nisi est sit amet facilisis magna etiam tempor. Id diam maecenas ultricies mi eget. Sed velit dignissim sodales ut. Purus semper eget duis at. Pellentesque sit amet porttitor eget dolor morbi. Faucibus a pellentesque sit amet porttitor. Orci a scelerisque purus semper eget duis. Mauris commodo quis imperdiet massa tincidunt. Pulvinar elementum integer enim neque. In vitae turpis massa sed elementum. Rhoncus dolor purus non enim.</p>\n<h3 id=\"ipsum\" tabindex=\"-1\">Ipsum</h3>\n<p>Nunc non blandit massa enim nec dui nunc mattis enim. Lectus urna duis convallis convallis tellus. Maecenas volutpat blandit aliquam etiam. Vivamus arcu felis bibendum ut tristique et egestas quis. Amet aliquam id diam maecenas ultricies mi eget. In hac habitasse platea dictumst quisque sagittis purus sit. Non pulvinar neque laoreet suspendisse interdum consectetur libero id. Tempus imperdiet nulla malesuada pellentesque elit eget gravida cum sociis. Suscipit adipiscing bibendum est ultricies integer quis auctor elit. Adipiscing commodo elit at imperdiet dui accumsan sit amet. At augue eget arcu dictum varius duis. Purus viverra accumsan in nisl nisi. Ut pharetra sit amet aliquam.</p>\n<h3 id=\"dolor\" tabindex=\"-1\">Dolor</h3>\n<p>Nunc id cursus metus aliquam eleifend mi in nulla posuere. In fermentum posuere urna nec tincidunt praesent. Imperdiet massa tincidunt nunc pulvinar sapien et. Morbi tristique senectus et netus et. At quis risus sed vulputate odio ut enim blandit volutpat. Consectetur a erat nam at lectus. Adipiscing diam donec adipiscing tristique risus nec feugiat in. Dictum varius duis at consectetur lorem donec massa sapien. Adipiscing tristique risus nec feugiat in. Amet cursus sit amet dictum sit amet justo donec enim. Ullamcorper dignissim cras tincidunt lobortis feugiat vivamus at augue eget. Condimentum lacinia quis vel eros. Tincidunt tortor aliquam nulla facilisi cras fermentum odio eu feugiat. Enim eu turpis egestas pretium aenean.</p>\n<h3 id=\"sit\" tabindex=\"-1\">Sit</h3>\n<p>Gravida neque convallis a cras semper auctor. Viverra mauris in aliquam sem. Dui nunc mattis enim ut tellus elementum sagittis vitae. Viverra mauris in aliquam sem fringilla ut morbi tincidunt augue. Turpis cursus in hac habitasse platea dictumst quisque. Lectus quam id leo in vitae. Nibh venenatis cras sed felis eget velit. Ut ornare lectus sit amet. Iaculis nunc sed augue lacus viverra vitae congue. Lobortis feugiat vivamus at augue eget. At lectus urna duis convallis convallis tellus id interdum velit. Enim ut tellus elementum sagittis vitae et. Placerat in egestas erat imperdiet sed. Tempor orci eu lobortis elementum nibh. Tempus urna et pharetra pharetra. Ut aliquam purus sit amet luctus venenatis. Nisi porta lorem mollis aliquam ut porttitor. Nunc pulvinar sapien et ligula ullamcorper malesuada proin. Odio euismod lacinia at quis risus sed vulputate.</p>\n<h3 id=\"amet\" tabindex=\"-1\">Amet</h3>\n<p>Risus nullam eget felis eget nunc lobortis. Malesuada fames ac turpis egestas integer eget aliquet nibh. Viverra accumsan in nisl nisi. Lorem ipsum dolor sit amet. Facilisis magna etiam tempor orci eu lobortis elementum nibh. Eu volutpat odio facilisis mauris sit amet. Arcu bibendum at varius vel pharetra vel turpis nunc. Et tortor consequat id porta nibh venenatis. In tellus integer feugiat scelerisque varius. Etiam non quam lacus suspendisse faucibus interdum posuere. Ac auctor augue mauris augue neque gravida. Faucibus et molestie ac feugiat sed lectus vestibulum mattis. Proin libero nunc consequat interdum varius. Luctus accumsan tortor posuere ac ut. Mauris a diam maecenas sed enim ut sem viverra aliquet. Fames ac turpis egestas integer eget aliquet nibh.</p>\n",
      "date_published": "1908-12-12T00:00:00Z"
    }
  ]
}